@page "/asistencia/registro"
@attribute [Authorize(Roles = "Intendente")]

@using BlazorBarcodeScanner.ZXing.JS

<PageTitle>Registro de Asistencia</PageTitle>

<div class="row justify-content-center">
    <div class="col-md-6">
        <h1 class="h3 text-center m-3 mx-0 mt-0">Registro de asistencia</h1>

        <div class="alert alert-secondary p-5 pt-4 pb-2 m-3 mx-0 mt-0 @_instructionsVisibility" style="text-align: justify;" role="alert">
            <h2 class="alert-heading text-center h4">A tomar en cuenta</h2>

            <hr />

            <p>En esta pantalla se registrará la asistencia del usuario que tenga la sesión iniciada en este dispositivo.</p>
            <p>Debe leer el código QR que se encuentra en el establecimiento donde se vaya a dar el servicio de limpieza.</p>
            <p>Para conseguir hacer la lectura, se debe hacer clic en el botón <strong>"Iniciar Cámara"</strong> y <strong>conceder los permisos necesarios a la aplicación</strong>.</p>
        </div>

        <div class="row justify-content-center">
            <div class="text-center m-3 mx-0 mt-0">
                <MudButton OnClick="InitLectorQR" Color="Color.Primary" Variant="Variant.Filled"
                           EndIcon="fa fa-camera">Iniciar Cámara</MudButton>
            </div>

            <div class="text-center m-3 mx-0 mt-0 @_scannerVisibility">
                <BarcodeReader @ref="_scanner" Title="" 
                               StartCameraAutomatically="false"
                               OnBarcodeReceived="ReceiveQRCodeAsync"
                               ShowStart="false"
                               ShowReset="false"
                               ShowResult="false"
                               ShowToggleTorch="false"
                               ShowVideoDeviceList="true"
                               VideoWidth="300"
                               VideoHeight="200"/>
            </div>
        </div>
    </div>
</div>
